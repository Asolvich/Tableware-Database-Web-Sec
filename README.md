# Tableware-Database-Web-Sec
Web java application that works with PostgreSQL with modifications.

## Описание
Простое web java приложение для работы с PostgreSQL с дополнительными модификациями.

## Сборка и запуск

### Требования
- Java 17 (или выше)
- Maven 3.6.0 (или выше)

### Сборка
Чтобы собрать приложение, необходимо выполнить следующие действия:
1. Скопируйте репозиторий.
2. Откройте папку с проектом.
3. Запустите скрипт ```init.sql``` с помощью следующей команды:
```cmd
psql -U postgres -d postgres -f init.sql
```
(Если PostgreSQL уже установлен, но psql не найден, нужно добавить путь к папке с исполняемым файлом psql в переменную окружения PATH.)

### Запуск
Выполните команды:
```cmd
mvn clean install
```

```cmd
mvn spring-boot:run
```

После запуска необходимо перейти по ссылке:
```Browser addres bar
http://localhost:8080/
```

## Документация

### Задачи
Изменить практическую работу Tableware-Database-Web, добавив следующий функционал:

1. Добавить простейшую страницу регистрации. Пользователь вводит свои логин и пароль и данная информация вносится в базу данных, пользователю присваивается роль пользователя (User) приложения.
2. Добавить простейшую форму аутентификации. Форма создается программно, а не автоматически генерируется Spring.
3. В приложении должен быть предусмотрен пользователь — администратор (Admin) с ролью отличной, от User. 
4. Разграничить уровни доступа к страницам приложения. Пользователь (User) имеет доступ только к страницам просмотра всех записей и запросов. Администратор (Admin) имеет возможность добавлять, редактировать и удалять записи. 
5. Информация о пользователях и их ролях должна храниться в базе данных. Способ хранения — на усмотрение студента. 
6. Предусмотреть возможность выхода из приложения (logout).
7. Продемонстрировать умение настраивать безопасность на уровне представлений. Для этого реализуется приветствие пользователя после его входа и отображение элемента на основе его роли.

### Реализовано
- Добавлена страница регистрации и входа.
- Добавлены пользователи.

#### Описание классов
- **Class DatabaseConfig** это класс настраивает DataSource и JdbcTemplate для работы с базой данных.
- **Class Tableware:** Класс-сущность, представляющий посуду. 
id (автоматически генерируется в БД). name, material, type, volume_ml, price_rub.
- **Class TablewareDAO:** Data Access Object для работы с таблицей tableware. 
add — добавление новой записи.
getAll — получение всех записей.
getById - получение записи по ID.
update — обновление записи по ID.
delete — удаление записи по ID.
searchByType — поиск записей по типу.
- **Class TablewareController:** Клас управляет обработкой HTTP-запросов, связанными с операциями CRUD и поиском записей о посуде, связывая пользовательский интерфейс с сервисным уровнем.
- **Class TablewareService:** Сервисный класс для управления посудой. Предоставляет методы для добавления, получения, обновления, удаления и поиска посуды.
- **Class WebApplication:** Класс реализующий веб приложение для взаимодействия с пользователем.
- **Class ShopUserDetails:** Класс реализующий интерфейс UserDetails для пользователя системы.
- **Class User:** Класс для работы с таблицей пользователей.
- **Class UserController:** Класс контроллер для работы с пользователями.
- **Class UserDetailsServiceImpl:** Класс сервис для загрузки пользовательских данных из репозитория пользователей.
- **Interface UserRepository:** Репозиторий для работы с пользователями.
- **Class UserService:** Класс сервис для работы с пользователями системы.
- **Class UserValidator:** Класс валидатор для проверки уникальности имени пользователя.
- **Class WebSecurityConfig:** Класс конфигурации для настройки SpringSecurity в приложении.

### Описание ресурсов
- **application.properties:** файл в котором определяются настройки, такие как параметры подключения к базе данных, порты, пути.
- **init.sql:** файл, создаёт базу данных, таблицу tableware и заполняет её начальными данными.
- **static.css** папка, в которой хранятся css файлы.
- **templates** папка, в которой хранятся html страницы.